-- –ó–∞–≥—Ä—É–∂–∞–µ–º Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
local Window = Rayfield:CreateWindow({
   Name = "V0909 Gui V4",
   Icon = 0,
   LoadingTitle = "V0909 Gui V4",
   LoadingSubtitle = "by V1adislav0909",
   ShowText = "Hub",
   Theme = "Default",
   ToggleUIKeybind = "K",
   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,
   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "V0909HubConfig"
   },
   Discord = {
      Enabled = false,
      Invite = "",
      RememberJoins = true
   },
   KeySystem = false
})

-----------------------------------------------------
-- üü¶ –í–∫–ª–∞–¥–∫–∞: Main
-----------------------------------------------------
local MainTab = Window:CreateTab("Main", 4483362458)

MainTab:CreateButton({
    Name = "ESP",
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/xDIE7GTt/raw"))()
    end
})

MainTab:CreateButton({
    Name = "ColorCode",
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/OMjEOAIN/raw"))()
    end
})

MainTab:CreateButton({
    Name = "Cheese thing",
    Callback = function()
        loadstring(game:HttpGet("https://pastefy.app/g92FXJ0y/raw"))()
    end
})

-----------------------------------------------------
-- üü© –í–∫–ª–∞–¥–∫–∞: Misc
-----------------------------------------------------
local MiscTab = Window:CreateTab("Misc", 4483362458)

-- –ö–Ω–æ–ø–∫–∞ IY
MiscTab:CreateButton({
    Name = "IY",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    end
})

-- Toggle Remove Cutscene
local autoRemoveCutsceneEnabled = false
local autoRemoveCutsceneConnection

MiscTab:CreateToggle({
    Name = "Remove Cutscene",
    CurrentValue = false,
    Flag = "AutoRemoveCutsceneToggle",
    Callback = function(Value)
        autoRemoveCutsceneEnabled = Value
        local player = game.Players.LocalPlayer

        if autoRemoveCutsceneEnabled then
            autoRemoveCutsceneConnection = game:GetService("RunService").Heartbeat:Connect(function()
                if player and player:FindFirstChild("PlayerGui") then
                    local cutscene = player.PlayerGui:FindFirstChild("CutsceneDeluxe")
                    if cutscene then
                        cutscene:Destroy()
                    end
                end
            end)
        else
            if autoRemoveCutsceneConnection then
                autoRemoveCutsceneConnection:Disconnect()
            end
        end
    end
})

-- –°–µ–∫—Ü–∏—è Abandoned School
MiscTab:CreateSection("Abandoned School")

-- –ö–Ω–æ–ø–∫–∞ Bring Burger / Get Ghostburger
MiscTab:CreateButton({
    Name = "Bring Burger / Get Ghostburger",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end

        local puzzleCheese = workspace:FindFirstChild("PuzzleBin") 
                            and workspace.PuzzleBin:FindFirstChild("Puzzle | Cheese")

        if puzzleCheese then
            local cheesePart = puzzleCheese:FindFirstChild("Cheese")
            local standPart = puzzleCheese:FindFirstChild("Stand")
            
            if cheesePart and cheesePart:IsA("BasePart") then
                char.HumanoidRootPart.CFrame = cheesePart.CFrame + Vector3.new(0,5,0)
            end

            wait(0.3)

            if standPart and standPart:IsA("BasePart") then
                char.HumanoidRootPart.CFrame = standPart.CFrame * CFrame.Angles(math.rad(-90),0,0) + Vector3.new(0,5,0)
                
                local backpack = player:FindFirstChild("Backpack")
                local tool = backpack and backpack:FindFirstChild("PuzzleCheeseTool")
                if tool then
                    tool.Parent = char
                end
            end
        else
            warn("Puzzle | Cheese –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ PuzzleBin!")
        end
    end
})

-- –ö–Ω–æ–ø–∫–∞ Collect all HW skins
MiscTab:CreateButton({
    Name = "Collect all HW skins",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end

        local HalloweenSchool = workspace:FindFirstChild("Map") 
                                and workspace.Map:FindFirstChild("HalloweenSchool")

        if not HalloweenSchool then return end

        local locations = {
            HalloweenSchool:FindFirstChild("PumpkinStand"),
            HalloweenSchool:FindFirstChild("PsychoStand"),
            HalloweenSchool:FindFirstChild("RobotStand"),
            HalloweenSchool:FindFirstChild("GhostBear") and HalloweenSchool.GhostBear:FindFirstChild("Ghost")
        }

        for _, loc in pairs(locations) do
            if loc then
                local targetCFrame
                if loc:IsA("BasePart") then
                    targetCFrame = loc.CFrame
                elseif loc:FindFirstChild("HumanoidRootPart") then
                    targetCFrame = loc.HumanoidRootPart.CFrame
                else
                    targetCFrame = CFrame.new(loc:GetModelCFrame().Position)
                end
                char.HumanoidRootPart.CFrame = targetCFrame + Vector3.new(0,3,0)
                wait(0.5)
            end
        end
    end
})

-----------------------------------------------------
-- üü® –í–∫–ª–∞–¥–∫–∞: Player
-----------------------------------------------------
local PlayerTab = Window:CreateTab("Player", 4483362458)

PlayerTab:CreateSlider({
   Name = "–°–∫–æ—Ä–æ—Å—Ç—å",
   Range = {16, 100},
   Increment = 1,
   Suffix = "Speed",
   CurrentValue = 16,
   Flag = "SpeedSlider",
   Callback = function(Value)
       local player = game.Players.LocalPlayer
       if player and player.Character and player.Character:FindFirstChild("Humanoid") then
           player.Character.Humanoid.WalkSpeed = Value
       end
   end,
})

PlayerTab:CreateSlider({
   Name = "–ü—Ä—ã–∂–æ–∫",
   Range = {50, 200},
   Increment = 1,
   Suffix = "Jump",
   CurrentValue = 50,
   Flag = "JumpSlider",
   Callback = function(Value)
       local player = game.Players.LocalPlayer
       if player and player.Character and player.Character:FindFirstChild("Humanoid") then
           player.Character.Humanoid.JumpPower = Value
       end
   end,
})

local noclipEnabled = false
local noclipConnection
PlayerTab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(Value)
        noclipEnabled = Value
        local player = game.Players.LocalPlayer
        if noclipEnabled then
            noclipConnection = game:GetService("RunService").Stepped:Connect(function()
                if player and player.Character then
                    for _, part in pairs(player.Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
            end)
        else
            if noclipConnection then noclipConnection:Disconnect() end
        end
    end,
})

local infiniteJumpEnabled = false
PlayerTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Flag = "InfiniteJumpToggle",
    Callback = function(Value)
        infiniteJumpEnabled = Value
    end,
})

game:GetService("UserInputService").JumpRequest:Connect(function()
    if infiniteJumpEnabled then
        local player = game.Players.LocalPlayer
        if player and player.Character and player.Character:FindFirstChildOfClass("Humanoid") then
            player.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
        end
    end
end)

-----------------------------------------------------
-- üü™ –í–∫–ª–∞–¥–∫–∞: Visuals
-----------------------------------------------------
local VisualsTab = Window:CreateTab("Visuals", 4483362458)

local fullbrightEnabled = false
local fullbrightLoop
VisualsTab:CreateToggle({
    Name = "Night Vision (FullBright)",
    CurrentValue = false,
    Flag = "FullBrightToggle",
    Callback = function(Value)
        fullbrightEnabled = Value
        local lighting = game:GetService("Lighting")
        if fullbrightEnabled then
            fullbrightLoop = game:GetService("RunService").RenderStepped:Connect(function()
                lighting.Brightness = 2
                lighting.ClockTime = 14
                lighting.FogEnd = 100000
                lighting.GlobalShadows = false
                lighting.OutdoorAmbient = Color3.new(1,1,1)
            end)
        else
            if fullbrightLoop then fullbrightLoop:Disconnect() end
            lighting.GlobalShadows = true
        end
    end,
})

local xrayEnabled = false
local transparency = 0.5
VisualsTab:CreateToggle({
    Name = "XRay",
    CurrentValue = false,
    Flag = "XRayToggle",
    Callback = function(Value)
        xrayEnabled = Value
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("BasePart") and v.Transparency < 1 and v.Name ~= "Terrain" then
                if xrayEnabled then
                    v.LocalTransparencyModifier = transparency
                else
                    v.LocalTransparencyModifier = 0
                end
            end
        end
    end,
})

-----------------------------------------------------
-- üü´ –í–∫–ª–∞–¥–∫–∞: Teleports
-----------------------------------------------------
local TeleportsTab = Window:CreateTab("Teleports", 4483362458)

-- Color Code
TeleportsTab:CreateButton({
    Name = "Color Code",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local decor = workspace:FindFirstChild("PuzzleBin") 
                          and workspace.PuzzleBin:FindFirstChild("ColorCode") 
                          and workspace.PuzzleBin.ColorCode:FindFirstChild("Decor")
            if decor then
                local part = decor:FindFirstChildWhichIsA("BasePart")
                if part then
                    char.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0,3,0)
                end
            end
        end
    end
})

-- Cheese Altar
TeleportsTab:CreateButton({
    Name = "Cheese Altar",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local cheeseAltar = workspace:FindFirstChild("PuzzleBin") 
                                and workspace.PuzzleBin:FindFirstChild("CheeseAltar")
            if cheeseAltar then
                local base = cheeseAltar:FindFirstChildWhichIsA("BasePart")
                if base then
                    char.HumanoidRootPart.CFrame = base.CFrame + Vector3.new(0,3,0)
                end
            end
        end
    end
})

-- Lobby Spawn
TeleportsTab:CreateButton({
    Name = "Lobby",
    Callback = function()
        local player = game.Players.LocalPlayer
        local char = player.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local spawnLocation = workspace:FindFirstChild("Lobby") 
                                  and workspace.Lobby:FindFirstChild("SpawnLocation")
            if spawnLocation and spawnLocation:IsA("BasePart") then
                char.HumanoidRootPart.CFrame = spawnLocation.CFrame + Vector3.new(0,3,0)
            end
        end
    end
})
